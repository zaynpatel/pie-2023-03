<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Sprint 2</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="main.css">
  </head>
  <body>
    <nav class="navbar navbar-expand-lg bg-body-tertiary fixed-top" data-bs-theme="dark">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">cam-track</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link" href="index.html">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="team.html">About Us</a>
            </li>
            
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                Product Details
              </a>
              <ul class="dropdown-menu">
                <li style="margin-left:0px"><a class="dropdown-item" href="mechanical.html">Mechanical Design</a></li>
                <li style="margin-left:0px"><a class="dropdown-item" href="electrical.html">Electrical and Firmware Design</a></li>
                <li style="margin-left:0px"><a class="dropdown-item" href="software.html">Software Design</a></li>
                <li><hr class="dropdown-divider"></li>
                <li style="margin-left:0px"><a class="dropdown-item" href="budget.html">Bill of Materials</a></li>
              </ul>
            </li>

            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle active" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false" aria-current="page">
                Sprints
              </a>
              <ul class="dropdown-menu">
                <li style="margin-left:0px"><a class="dropdown-item" href="sprint_1.html">Sprint 1</a></li>
                <li style="margin-left:0px"><a class="dropdown-item" href="sprint_2.html">Sprint 2</a></li>
                <li style="margin-left:0px"><a class="dropdown-item" href="sprint_3.html">Sprint 3</a></li>
              </ul>
            </li>
            
          </ul>
        </div>
      </div>
    </nav>

    <div class="container">
        <div class="card mx-auto img-fluid sprint-card">
            <img class="card-img-top" src="assets/sprint_2_bg.png">
            <div class="card-img-overlay">
                <h1 class="card-text" style="padding: 185px 0px; color:white">Sprint 2</h1>
            </div>
        </div>
    </div>

    <div class="overview">
      <h3>Video Demo</h3>
      <br>
      <div class="row">
        <div class="col-7">
          <iframe width="840" height="472.5" src="https://www.youtube.com/embed/yhDmNhJyVxQ?si=lVoDk6JoAgKWY76h" 
            title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; 
            picture-in-picture; web-share" allowfullscreen>
          </iframe>
        </div>
        <div class="col-5">
          <p>The goal for this sprint was to get the pan-and-tilt part of our automated tripod working. We 3D-printed the pan-tilt mechanism,
            which would contain the DSLR camera, and programmed two stepper motors to rotate the camera using this mechanism. Only vertical
            motion was finalized with this design due to mechanical errors, which would be fixed in later sprints.
          </p>
        </div>
      </div>
    </div>

    <div class="overview">
        <h3>Mechanical</h3>
        <br>
        <div class="row">
            <div class="col-4">
                <img src="assets/mech_sprint_2_cad.JPG" style="height:auto; width:450px; border: 3px solid gray;">
                <figcaption>First draft of a CAD model of the full tripod and pan-tilt design to hold the camera. Different
                  subsystems within the CAD model are labeled on the image.
                </figcaption>
            </div>
            <div class="col-4">
              <img src="assets/mech_sprint_2_pan_tilt.jpg" style="height:auto; width: 450px;">
              <figcaption>3D-printed pan-and-tilt mechanism</figcaption>
            </div>
            <div class="col-4">
              <iframe width="480" height="350" src="https://www.youtube.com/embed/1rHUXnnqVIM?si=mZBT2x-WRoi8Zoy5" 
                title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; 
                encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen>
              </iframe>
              <figcaption>Mechanical video demo of the pan-and-tilt mechanism holding the camera</figcaption>
            </div>
        </div>
        <div style="margin-top: 50px;">
          <p style="margin-left: 0px;">
            The mechanical goal for Sprint 2 was to completely finish CAD for the entire tripod design and begin working on fabrication for
            the final assembly. The pan-and-tilt mechanism was 3D-printed, with stepper motors screwed into place and attached to gears so 
            it could vertically tilt and horizontally pan the camera around. Fabrication of the main tripod was also started.
          </p>
        </div>
    </div>

    <div class="overview">
      <h3>Software</h3>
      <br>
      <div class="row">
        <div class="col-5">
            <img src="assets/sprint_2_detect.gif" style="height:350px; width:auto;">
            <figcaption>Demo of the SSD network identifying a person</figcaption>
        </div>
        <div class="col-6" style="margin-left: 50px;">
          <img src="assets/sprint_2_dnn_framework.png" style="height:250px; width:auto;">
          <figcaption>A diagram of the general framework for a SSD network</figcaption>
        </div>
    </div>
          <div style="margin-top: 50px;">
          <p style="margin-left: 0px;">
                For this sprint, the primary software goal was to find a more adaptable person recognition algorithm. For an 
                algorithm to meet our needs it would have to fulfill two criteria. First, it needs to track the full body, and work
                in a range of poses for a range of people. Secondly, it needs to be able to run on a Raspberry Pi 4. This is by far
                our largest limitation, since object detection algorithms that are conventionally considered fast, wouldn't have sufficient
                performance on our Raspberry Pi. Solutions such as YOLO or TensorFlow either didn't run or were too slow, yet some sort of
                machine learning approach was still needed in order to fit our first criteria. Eventually we settled on a Single-Shot multibox
                Detection network initialized with OpenCV's dnn Detection Model class, trained on the COCO dataset. With this algorithm implemented,
                we could now place a bounding box around a wide range of subjects and poses, resolving the bias issues of our previous implementation.
                However, since the code was re-detecting every frame, we were only getting about 5 frames a second.
              </p>
          </div>
      </div>
    </div>

    <div class="overview">
      <h3>Electrical</h3>
      <br>
      <div class="row">
          <div class="col-5">
              <img src="assets/sprint_2_stepper.gif" style="height:350px; width:auto;">
              <figcaption>Demo of moving stepper motors at different speeds with Serial commands through the Arduino</figcaption>
          </div>
          <div class="col-6" style="margin-left: 50px;">
            <img src="assets/sprint_2_elec_diagram.png" style="height:350px; width:auto;">
            <figcaption>Block diagram showing wire connections between all electrical components</figcaption>
          </div>
      </div>
      <div style="margin-top: 50px;">
        <p style="margin-left: 0px;">
          One major step forward this sprint was switching from servos to stepper motors to rotate the camera. We decided on using A4988 
          stepper motor drivers and a CNC motorshield attached to the Arduino UNO R3 to control the steppers. The code controlling the 
          stepper motors also was adjusted to separately command the x and y motors to rotate the camera until it centered in on the face. 
        </p>
      </div>
    </div>
    <br>
    <br>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
  </body>
</html>